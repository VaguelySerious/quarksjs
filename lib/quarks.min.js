function random(t,s){return Math.floor(Math.random()*(s-t))+t}function randomFloat(t,s){return Math.random()*(s-t)+t}function ellipsePerimeter(t,s){const n=Math.max(t,s),o=Math.min(t,s);return 2*Math.PI*Math.sqrt((n*n+o*o)/2)}class QuarkAnimation{constructor(t){this.canvas=document.getElementById(t.id),this.ctx=this.canvas.getContext("2d"),this.bounds=Object.assign({x:100,y:100},t.bounds||{}),this.offset=Object.assign({x:0,y:0},t.offset||{}),this.color=t.color||"0,0,0";const s=t.count||200,n=Math.max(this.bounds.x,this.bounds.y);this.size=n,this.maxLength=n/8;const o=[];this.points=o;for(let t=0;t<s;t++){const t=random(0,this.bounds.x),s=random(0,this.bounds.y),i=random(6,Math.floor(n/5)),a=i,r=random(n/100,n/50),e=randomFloat(0,2*Math.PI),h=Math.random()>=.5?1:-1,c=Math.PI*i*2;0,o.push({centerX:t,centerY:s,radiusX:i,radiusY:a,speed:r,pos:e,direction:h,perimeter:c})}}tick(){this.points.forEach(t=>{t.x=Math.cos(t.pos)*t.radiusX+t.centerX,t.y=Math.sin(t.pos)*t.radiusY+t.centerY;const s=t.direction*t.speed;t.pos=(t.pos+s/t.perimeter)%360})}draw(){const t=this.ctx,s=this.offset;t.clearRect(0,0,1e3,1e3),this.points.forEach(({x:n,y:o})=>{t.fillRect(n-1+s,o-1+s,3,3),this.points.forEach(({x:i,y:a})=>{const r=Math.sqrt(Math.pow(n-i,2)+Math.pow(o-a,2)),e=this.maxLength-r,h=3*Math.sqrt(e*(100/this.maxLength));h>0&&h<100&&(t.beginPath(),t.strokeStyle=`rgba(${this.color},${h/100})`,t.moveTo(n+s.x,o+s.y),t.lineTo(i+s.x,a+s.y),t.stroke())})}),this.running&&(this.tick(),window.requestAnimationFrame(this.draw.bind(this)))}start(){this.running=!0,window.requestAnimationFrame(this.draw.bind(this))}stop(){this.running=!1}}window.QuarkAnimation=QuarkAnimation;